<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="./style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
    </head>
     <body>
        
        <div id="mainDiv">
            <h1>Sign Up</h1>
            <form action="">
                <div id="formDiv">
                    <div id="nameDiv">
                        <label for="usernameR">Username:</label>
                        <input type="text" name="usernameR" id="usernameR" required>
                    </div>
                    <div id="passwordDiv">
                        <label for="userPasswordR">Password:</label>
                        <input type="password" name="userPasswordR" id="userPasswordR" required>
                        <p style="font-size: 15px;">Min 8 characters.</p>
                    </div>
                </div>
                <input type="submit" id="signUpButton" class="myBtn">
                <p style="color: black;">Have an account? <a href="./login.html">sign in</a></p>
            </form>
        </div>

        <script>
            function signUp(name , password){
                let users = JSON.parse(localStorage.getItem("users")) || []
                if (password.length >= 8){
                    const newUser = new User(name , password);
                    users.push(newUser)
                
                    localStorage.setItem("users" , JSON.stringify(users))
                    console.log("sign up succesfull")
                    console.log(`your name is ${name} password is ${password}`)
                    localStorage.setItem("loggedInUser", JSON.stringify(newUser))
                    window.location.href = "chats.html"
                }
            }
            document.getElementById("signUpButton").addEventListener("click", function(event){
                event.preventDefault()
                const name = document.getElementById("usernameR").value
                const password = document.getElementById("userPasswordR").value
                signUp(name, password)
            })
            document.getElementById("userPasswordR").addEventListener("keyup" , function(event){
                event.preventDefault()
                if (document.getElementById("userPasswordR").value.length >= 8){
                    document.getElementsByTagName("p")[0].style.color = "green"
                }
                else if (document.getElementById("userPasswordR").value.length < 8){
                    document.getElementsByTagName("p")[0].style.color = "red"
                }
            })
        </script>
        <script src="./script.js"></script>

     </body>
</html>
